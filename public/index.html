<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://aframe.io/releases/1.7.1/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@c-frame/aframe-physics-system@4.2.3/dist/aframe-physics-system.min.js"></script>

    <script src="./main.js" defer></script>
    <title>Document</title>
  </head>
  <body>
    <a-scene
      physics="gravity: -9.8;"
      shadow="type: pcfsoft"
      renderer="antialias:true"
      background="color: #26c4e0"
    >
      <a-entity light="type:directional; intensity:2.0" position="0 3 -2">
      </a-entity>
      <a-entity light="type:ambient; intensity:0.45; color:#cbd5ff"></a-entity>
      <a-entity
        light="type: directional; intensity: 1; castShadow: true"
        position="0 10 -3"
        target="#ball"
      ></a-entity>

      <!-- PAREDES Y SUELO-->
      <a-plane
        rotation="-90 0 0"
        width="8"
        height="24"
        color="#1a1a22"
        shadow="receive: true"
        position="0 0 -5"
      ></a-plane>

      <a-plane
        rotation="0 -90 0"
        width="24"
        height="3"
        color="green"
        position="4 0 -5"
      >
        <!-- HUD del marcador -->
        <a-entity position="-2 0.8 0">
          <a-text value="Score: " color="#fff" width="14" align="left"></a-text>
        </a-entity>
        <a-entity id="scoreHud" position="0 0.8 0">
          <a-text
            id="scoreText"
            value="0"
            color="#fff"
            width="14"
            align="left"
          ></a-text>
        </a-entity>
      </a-plane>

      <a-plane
        rotation="0 90 0"
        width="24"
        height="3"
        color="green"
        position="-4 0 -5"
      ></a-plane>

      <!-- Bola del cañón -->
      <a-sphere
        id="ball"
        position="0 1.2 -10"
        radius="0.3"
        color="red"
        shadow="cast: true; receive: false"
        dynamic-body="shape: sphere; mass: 0.1; restitution: 0.1"
        cannon-shot="zNear:-6; 
                       zFar:-1; 
                       speedZ:2; 
                       up:3; 
                       cooldown:5000; 
                       groundY:0; 
                       noCollision:false"
        aabb-hit="target: #basket"
        vanish-on-ground="ground: #ground"
      >
        >
      </a-sphere>

      <!-- Cañón al fondo -->
      <a-entity
        id="cannon"
        position="0 1.2 -10"
        cannon="rate: 1100; speed: 4.8; spread: 0.9"
      >
        <a-circle
          rotation="0 0 0"
          radius="0.15"
          color="red"
          position="0 0.6 1"
        ></a-circle>

        <a-cylinder
          radius="0.30"
          height="1.4"
          color="#555"
          position="0 0.2 0.2"
          rotation="-120 0 0"
        ></a-cylinder>

        <a-box
          depth="0.8"
          height="0.4"
          width="1"
          color="#333"
          position="0 -0.4 0"
        ></a-box>
      </a-entity>

      <!-- Cámara -->
      <a-entity id="rig" position="0 0 0">
        <a-entity
          id="camera"
          position="0 3 3"
          camera
          wasd-controls="enabled:false"
          look-controls="pointerLockEnabled: true"
        ></a-entity>

        <!-- Cesta ligada a la cámara: delante de la vista -->
        <a-entity
          id="basket"
          kinematic-body="shape: box"
          position="0 0.4 -0.6"
          distance-controller="minCm:5; maxCm:60; minX:-3; maxX:3; smooth:0.35"
        >
          <a-box depth="1.5" height="0.25" width="1" color="#7dd3fc"></a-box>
          <a-box
            position="0 0.2 0"
            depth="0.5"
            height="0.01"
            width="0.80"
            color="red"
          ></a-box>
        </a-entity>
      </a-entity>
    </a-scene>
  </body>
</html>
